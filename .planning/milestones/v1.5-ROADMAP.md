# Milestone v1.5: Partial Settlements

**Status:** SHIPPED 2026-02-28
**Phases:** 17
**Total Plans:** 1

## Overview

Allow users to record partial payments instead of requiring whole-balance settlements, enabling installment-style paybacks that update balances correctly.

## Phases

### Phase 17: Partial Settlement Amount Entry

**Goal**: Users can choose how much to settle when recording a payment -- from the minimum amount up to the full balance -- enabling installment-style paybacks that update balances correctly
**Depends on**: Phase 16 (existing settle-up flow in SettleConfirmSheet, NumPad component, useAmountInput hook)
**Plans**: 1 plan

Plans:

- [x] 17-01: Rewrite SettleConfirmSheet with NumPad integration, partial amount validation, dynamic snap points, and differentiated toast messages

**Details:**
- Two-state bottom sheet: display mode (compact 35% snap) vs edit mode (expanded 75% snap with NumPad)
- useSettlementAmountInput hook with balance cap, reset, and setFull methods
- getEffectiveSettleAmount dust rule helper preventing sub-peso remainders
- Differentiated toasts: "Fully settled with Name" vs "Settled PX.XX to Name"
- is_partial boolean added to PostHog settle_up analytics event

---

## Milestone Summary

**Decimal Phases:** None

**Key Decisions:**
- Inline hook and helper in SettleConfirmSheet rather than extracting to separate files (single consumer, cohesive)
- Dust rule threshold at P1.00 (100 centavos) -- remainder below this forces full settlement
- Display mode uses 35% snap, edit mode uses 75% snap for NumPad space
- No backend/database changes needed -- purely UI work on SettleConfirmSheet
- record_settlement RPC already accepts any positive amount (no API changes)

**Issues Resolved:**
- None

**Issues Deferred:**
- Overpayment support (settle more than owed, flipping debt direction) -- deferred to v1.6+
- Settlement notes/description field -- deferred to v1.6+

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
