---
phase: 01-foundation-design-system
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - theme/colors.ts
  - theme/typography.ts
  - theme/spacing.ts
  - theme/tokens.ts
  - theme/index.ts
  - components/ui/Text.tsx
  - components/ui/Button.tsx
  - components/ui/Card.tsx
  - components/ui/Input.tsx
  - components/ui/Avatar.tsx
  - components/ui/TabBar.tsx
  - app/_layout.tsx
  - app/(tabs)/_layout.tsx
  - app/(tabs)/index.tsx
autonomous: false

must_haves:
  truths:
    - "All color values in the app come from semantic tokens in theme/colors.ts, never hardcoded hex"
    - "Typography uses Plus Jakarta Sans with semantic text styles (moneyLarge, h1, body, caption, label)"
    - "Bottom tab bar has 3 tabs with an elevated green FAB center button for Add"
    - "Reusable components (Text, Button, Card, Input, Avatar) consume theme tokens and render correctly"
    - "App launches with dark theme and soft green accent visible on primary actions"
  artifacts:
    - path: "theme/colors.ts"
      provides: "Two-tier color token system (palette + semantic)"
      contains: "accent"
    - path: "theme/typography.ts"
      provides: "Font families, sizes, and semantic text styles"
      contains: "moneyLarge"
    - path: "theme/spacing.ts"
      provides: "Spacing scale and border radius tokens"
      contains: "radius"
    - path: "components/ui/Text.tsx"
      provides: "Themed text component with variant prop"
      contains: "variant"
    - path: "components/ui/Button.tsx"
      provides: "Button with primary/secondary/ghost variants"
      contains: "variant"
    - path: "components/ui/Card.tsx"
      provides: "Surface card with elevation"
      contains: "colors.backgroundCard"
    - path: "components/ui/Input.tsx"
      provides: "Underline-style text input"
      contains: "borderBottomWidth"
    - path: "components/ui/Avatar.tsx"
      provides: "Emoji-based avatar component"
      contains: "emoji"
    - path: "components/ui/TabBar.tsx"
      provides: "Custom tab bar with center FAB"
      contains: "fab"
    - path: "app/(tabs)/_layout.tsx"
      provides: "Tab layout using custom TabBar component"
      contains: "TabBar"
  key_links:
    - from: "components/ui/Text.tsx"
      to: "theme/typography.ts"
      via: "imports textStyles"
      pattern: "import.*textStyles.*typography"
    - from: "components/ui/Text.tsx"
      to: "theme/colors.ts"
      via: "imports colors"
      pattern: "import.*colors"
    - from: "components/ui/TabBar.tsx"
      to: "theme/colors.ts"
      via: "imports colors for FAB and tab styling"
      pattern: "import.*colors"
    - from: "app/(tabs)/_layout.tsx"
      to: "components/ui/TabBar.tsx"
      via: "custom tabBar prop"
      pattern: "TabBar"
    - from: "app/_layout.tsx"
      to: "theme/colors.ts"
      via: "uses background color"
      pattern: "colors\\.background"
---

<objective>
Build the complete dark-first design system with semantic color tokens, typography scale, spacing system, and reusable base components (Text, Button, Card, Input, Avatar). Implement the custom bottom tab bar with elevated green FAB center button. Replace all hardcoded styles from Plan 01 with theme tokens.

Purpose: Creates the visual foundation and component library that every screen in the app will use. Ensures consistent, maintainable styling from a single source of truth.

Output: A complete design token system and 6 reusable UI components, with the custom tab bar rendering the signature elevated FAB.
</objective>

<execution_context>
@/Users/julianernestcamello/.claude/get-shit-done/workflows/execute-plan.md
@/Users/julianernestcamello/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md
@.planning/phases/01-foundation-design-system/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create design token system and update root layout</name>
  <files>
    theme/colors.ts
    theme/typography.ts
    theme/spacing.ts
    theme/tokens.ts
    theme/index.ts
    app/_layout.tsx
  </files>
  <action>
    1. Create `theme/colors.ts` using the exact two-tier system from the research:
       - **Palette (primitives):** nearBlack #0D0D0D, dark1 #141414, dark2 #1A1A1A, dark3 #222222, dark4 #2A2A2A, dark5 #333333, grays (#666666, #888888, #AAAAAA, #CCCCCC), white #FFFFFF, green #9FE870, greenDark #7BC44E, greenSubtle #1A2E10, red #E85454, yellow #FFEB69
       - **Semantic tokens:** background, backgroundElevated, backgroundCard, surface, surfaceElevated, surfacePressed, textPrimary (white), textSecondary (#AAAAAA), textTertiary (#666666), textInverse (nearBlack), accent (green), accentPressed, accentSubtle, buttonPrimary (green), buttonPrimaryText (nearBlack), buttonSecondary (#222222), buttonSecondaryText (white), buttonGhost, inputBorder (#333333), inputBorderFocused (green), inputText (white), inputPlaceholder (#666666), border (#2A2A2A), borderSubtle (#222222), error (red), warning (yellow), success (green), tabBar (#141414), tabBarBorder (#222222), tabActive (green), tabInactive (#666666)
       - Export both `palette` and `colors` as const

    2. Create `theme/typography.ts` using research code:
       - **fontFamily:** regular (PlusJakartaSans_400Regular), medium (500), semiBold (600), bold (700), extraBold (800)
       - **fontSize:** xs 11, sm 13, base 15, lg 17, xl 20, 2xl 24, 3xl 30, 4xl 36, hero 48
       - **lineHeight:** tight 1.2, normal 1.4, relaxed 1.6
       - **textStyles (semantic):** moneyLarge (extraBold, hero, tight), moneyMedium (bold, 3xl), moneySmall (bold, xl), h1 (bold, 3xl), h2 (semiBold, 2xl), h3 (semiBold, xl), body (regular, base, relaxed), bodyMedium (medium, base), caption (regular, sm), label (medium, sm, uppercase, letterSpacing 0.5)

    3. Create `theme/spacing.ts`:
       - **spacing:** 0, 1:4, 2:8, 3:12, 4:16, 5:20, 6:24, 8:32, 10:40, 12:48, 16:64
       - **radius:** sm 8, md 12, lg 16, xl 24, full 9999

    4. Create `theme/tokens.ts` — re-exports everything:
       ```typescript
       export { colors, palette } from './colors';
       export { fontFamily, fontSize, lineHeight, textStyles } from './typography';
       export { spacing, radius } from './spacing';
       ```

    5. Create `theme/index.ts` — barrel export:
       ```typescript
       export * from './tokens';
       ```

    6. Update `app/_layout.tsx`:
       - Replace hardcoded '#0D0D0D' with `colors.background` from `@/theme`
       - Import colors from `@/theme`
       - Keep existing font loading and splash screen logic unchanged
  </action>
  <verify>
    Run `npx tsc --noEmit` — no TypeScript errors.
    Verify all theme files export correctly by checking import paths.
    App still boots with dark background.
  </verify>
  <done>
    Complete design token system exists in theme/ directory. All color, typography, and spacing values are defined as semantic tokens. Root layout uses theme tokens instead of hardcoded values. All tokens are exported from a single barrel (theme/index.ts).
  </done>
</task>

<task type="auto">
  <name>Task 2: Build reusable UI components and custom tab bar</name>
  <files>
    components/ui/Text.tsx
    components/ui/Button.tsx
    components/ui/Card.tsx
    components/ui/Input.tsx
    components/ui/Avatar.tsx
    components/ui/TabBar.tsx
    app/(tabs)/_layout.tsx
    app/(tabs)/index.tsx
  </files>
  <action>
    1. Create `components/ui/Text.tsx` — Themed text component:
       - Props: `variant` (keyof textStyles, default 'body'), `color` (keyof colors, default 'textPrimary'), plus all standard TextProps
       - Applies textStyles[variant] and colors[color], merges with style prop
       - Use the exact pattern from research code example

    2. Create `components/ui/Button.tsx` — Three-variant button:
       - Props: `variant` ('primary' | 'secondary' | 'ghost', default 'primary'), `label` (string), `onPress`, `disabled`, `loading`, plus ViewProps
       - **Primary:** backgroundColor colors.buttonPrimary (#9FE870), text colors.buttonPrimaryText (near-black), radius.lg (16px)
       - **Secondary:** backgroundColor colors.buttonSecondary (#222222), text colors.buttonSecondaryText (white), radius.lg
       - **Ghost:** transparent background, text colors.buttonGhostText (gray)
       - Height: 52px, horizontal padding: spacing[6] (24px)
       - Font: fontFamily.semiBold, fontSize.base
       - Pressable with opacity 0.8 on press (`({ pressed }) => [styles, pressed && { opacity: 0.8 }]`)
       - Disabled state: opacity 0.5, onPress ignored
       - Loading state: show ActivityIndicator in matching text color

    3. Create `components/ui/Card.tsx` — Surface card:
       - Props: `elevated` (boolean, default false), `children`, plus ViewProps
       - Default: backgroundColor colors.backgroundCard (#1A1A1A), borderRadius radius.lg (16px), padding spacing[4] (16px)
       - Elevated: backgroundColor colors.surfaceElevated (#222222)
       - No border — pure surface differentiation through color

    4. Create `components/ui/Input.tsx` — Underline input:
       - Use the exact pattern from research code example
       - Props: `label` (optional), `error` (optional), plus TextInputProps
       - Bottom border only (borderBottomWidth: 1)
       - Border color changes: default #333333, focused #9FE870, error #E85454
       - Label uses Text component with variant="label" color="textTertiary"
       - Error message uses Text component with variant="caption" color="error"
       - Selection/cursor color: accent green
       - Placeholder color: #666666

    5. Create `components/ui/Avatar.tsx` — Emoji avatar:
       - Props: `emoji` (string, optional), `size` ('sm' | 'md' | 'lg', default 'md'), `backgroundColor` (optional, defaults to colors.surfaceElevated)
       - Sizes: sm 32px, md 40px, lg 56px
       - Circular (borderRadius: size/2), centered emoji text
       - Emoji font size: sm 16px, md 20px, lg 28px
       - If no emoji provided, show a default emoji (e.g., face with sunglasses)
       - Export a `EMOJI_LIST` constant array of ~20 fun emojis for random assignment: faces, animals, food — Filipino-fun vibe (e.g., sunglasses, palm tree, rice, mango, star, fire, etc.)

    6. Create `components/ui/TabBar.tsx` — Custom bottom tab bar with center FAB:
       - This is a custom `tabBar` component for Expo Router's `<Tabs>` component
       - Receives `BottomTabBarProps` from `@react-navigation/bottom-tabs`
       - Render a View with flexDirection: row, backgroundColor colors.tabBar, borderTopWidth 1, borderTopColor colors.tabBarBorder
       - Use `useSafeAreaInsets()` for bottom padding
       - For each route in `state.routes`, render a Pressable tab trigger
       - **Center tab (index 1 = "add"):** Render as elevated FAB:
         - Width 56px, height 56px, borderRadius 28 (circle)
         - backgroundColor colors.accent (#9FE870)
         - marginTop -20 to elevate above the tab bar
         - Shadow: shadowColor colors.accent, shadowOffset {0, 4}, shadowOpacity 0.3, shadowRadius 8, elevation 8
         - Icon: Ionicons "add" (plus sign), size 28, color colors.textInverse (near-black)
       - **Side tabs (Groups, Profile):** Standard tab items
         - Icon + label below, active uses colors.tabActive, inactive uses colors.tabInactive
         - Icons: index (Groups) = "people-outline"/"people", profile = "person-outline"/"person"
         - Label font: fontFamily.medium, fontSize.xs
       - Handle onPress with `navigation.navigate(route.name)` and onLongPress with `navigation.emit`

    7. Update `app/(tabs)/_layout.tsx`:
       - Replace the default Tabs setup with `<Tabs tabBar={(props) => <TabBar {...props} />} screenOptions={{ headerShown: false }}>`
       - Import TabBar from `@/components/ui/TabBar`
       - Define screens: `<Tabs.Screen name="index" options={{ title: 'Groups' }} />`, `<Tabs.Screen name="add" options={{ title: 'Add' }} />`, `<Tabs.Screen name="profile" options={{ title: 'Profile' }} />`

    8. Update `app/(tabs)/index.tsx` — Replace placeholder with a demo showcase:
       - Import Text, Button, Card, Input, Avatar from `@/components/ui/`
       - Import colors, spacing from `@/theme`
       - Render a ScrollView with dark background showing:
         - Text component with variant="h1": "HatianApp"
         - Text with variant="moneyLarge": "₱1,234.56" (demonstrating hero money treatment)
         - Card containing a Text with variant="body"
         - A row of 3 Avatar components with different emojis
         - Button with variant="primary" label="Primary Action"
         - Button with variant="secondary" label="Secondary Action"
         - Button with variant="ghost" label="Ghost Action"
         - Input with label="Display Name" and placeholder
       - This serves as a visual test of all components — will be replaced by real Groups screen in Phase 3
       - Use generous spacing (spacing[6] gaps between sections) for the spacious, calm layout feel
  </action>
  <verify>
    Run `npx tsc --noEmit` — no TypeScript errors.
    Run `npx expo start` and verify on simulator:
    - Custom tab bar renders at bottom with elevated green FAB in center
    - Groups tab (index) shows the component showcase
    - All text uses Plus Jakarta Sans (not system font)
    - Money amount "₱1,234.56" is large, bold, and prominent
    - Primary button is green with dark text
    - Input has underline style with green focus state
    - Avatar shows emoji in circle
    - Dark theme is consistent throughout — no white/light areas
  </verify>
  <done>
    Six reusable UI components exist and render correctly. Custom tab bar displays with elevated green FAB center button. Component showcase on Groups tab demonstrates all design tokens working together. Dark-first theme with soft green accent is visually cohesive.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual verification of design system</name>
  <what-built>Complete dark-first design system with semantic tokens and 6 reusable components (Text, Button, Card, Input, Avatar, TabBar), rendered in a showcase on the Groups tab. Custom bottom tab bar with elevated green FAB center button.</what-built>
  <how-to-verify>
    1. Run `npx expo start` and open on iOS simulator or Android emulator
    2. Verify the overall aesthetic:
       - Near-black background (not pure black)
       - Soft green accent on primary button and FAB — not overpowering
       - Clean, spacious layout with generous padding
       - Plus Jakarta Sans font rendering correctly
    3. Verify the custom tab bar:
       - 3 tabs visible: Groups (left), Add FAB (center, elevated), Profile (right)
       - Center Add button is green, circular, raised above the tab bar
       - Active tab highlighted in green, inactive in gray
    4. Verify components on the showcase screen:
       - "₱1,234.56" renders large and bold (hero money treatment)
       - Card has subtle surface differentiation (slightly lighter than background)
       - Buttons show 3 distinct variants (green primary, dark secondary, transparent ghost)
       - Input shows underline style (bottom border only)
       - Avatars show emojis in circles
    5. Tap between tabs — all 3 navigate correctly
    6. No white flash on app launch
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe any visual issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes — no TypeScript errors
2. All theme files exist in `theme/` directory and export from barrel
3. All 6 components exist in `components/ui/` directory
4. No hardcoded hex colors remain in app/ or components/ files — all reference theme tokens
5. Custom tab bar renders with elevated FAB center button
6. App launches with dark theme, no white flash, Plus Jakarta Sans font loaded
7. Component showcase demonstrates all design tokens working cohesively
</verification>

<success_criteria>
- Design tokens (colors, typography, spacing) are defined in theme/ as a single source of truth
- Six reusable components consume tokens consistently: Text, Button, Card, Input, Avatar, TabBar
- Custom tab bar has 3 tabs with elevated green FAB center button
- App renders dark-first theme with soft green accent — matches Wise-inspired fintech aesthetic
- Human verification confirms visual quality
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-02-SUMMARY.md`
</output>
